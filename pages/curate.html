<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <script>
            /* 
             * To change this license header, choose License Headers in Project Properties.
             * To change this template file, choose Tools | Templates
             * and open the template in the editor.
             */



            var pathist = [];
            $.ajax({
                method: 'POST',
                url: 'http://127.0.0.1:5000/getTreeInfo',
                dataType: "json",
                contentType: "application/json ; charset=utf-8",
                data: JSON.stringify(pathist),
                success: function (data) {
                    $("#tree").fancytree({
                        checkbox: true,
                        selectMode: 3,
                        persist: {
                            expandLazy: false,
                            overrideSource: false,
                            store: "cookie", // force using cookies!
                        },
                        source: data.listObjects,
                        lazyLoad: function (event, data) {
                            var pathist = [];
                            var node = data.node;
                            pathist.push(node.key);
                            data.result = $.ajax({
                                url: 'http://127.0.0.1:5000/getTreeInfo',
                                method: 'POST',
                                dataType: "json",
                                contentType: "application/json ; charset=utf-8",
                                data: JSON.stringify(pathist),
                                cache: false,
                                success: function (resp) {
                                    node.addChildren(resp.listObjects);
                                    node.fixSelection3AfterClick();
                                    node.toggleExpanded();
                                }
                            });
                        },
                        select: function (event, data) {
                            // Get a list of all selected nodes, and convert to a key array:
                            var selKeys = $.map(data.tree.getSelectedNodes(), function (node) {
                                return node.key;
                            });
                            $("#echoSelection3").text(selKeys.join(", "));
                            // Get a list of all selected TOP nodes
                            var selRootNodes = data.tree.getSelectedNodes(true);
                            // ... and convert to a key array:
                            var selRootKeys = $.map(selRootNodes, function (node) {
                                return node.key;
                            });
                            $("#echoSelectionRootKeys3").text(selRootKeys.join(", "));
                            $("#echoSelectionRoots3").text(selRootNodes.join(", "));
                        },
                        dblclick: function (event, data) {
                            data.node.toggleSelected();
                        },
                        keydown: function (event, data) {
                            if (event.which === 32) {
                                data.node.toggleSelected();
                                return false;
                            }
                        },
                    });
                },
                failure: function (errMsg) {
                    alert(JSON.stringify(errMsg.toString()));
                }
            });
            $("#btnToggleSelect").click(function () {
                $("#tree").fancytree("getRootNode").visit(function (node) {
                    node.toggleSelected();
                });
                return false;
            });
            $("#btnDeselectAll").click(function () {
                $("#tree").fancytree("getTree").visit(function (node) {
                    node.setSelected(false);
                });
                return false;
            });
            $("#btnSelectAll").click(function () {
                $("#tree").fancytree("getTree").visit(function (node) {
                    node.setSelected(true);
                });
                return false;
            });



            //copy from tree
            $("#infoNotebookfile").focusin(function () {
                $('#tree').removeClass('disabled');
                var values = []
                $("#tree").fancytree("getTree").visit(function (node) {
                    if (node.selected) {
                        if (node.folder != "true") {
                            var keypath = node.key;
                            var projName = $('#projName').val();
                            var path = keypath.substring(keypath.indexOf(projName));
                            values.push(path);
                            var copiedcontent = values.slice();
                            $("#infoNotebookfile").val(copiedcontent);
                        }
                    }
                });
            });
            $("#CNotebookfile").focusin(function () {
                $('#tree').removeClass('disabled');
                var values = []
                $("#tree").fancytree("getTree").visit(function (node) {
                    if (node.selected) {
                        if (node.folder != "true") {
                            var keypath = node.key;
                            var projName = $('#projName').val();
                            var path = keypath.substring(keypath.indexOf(projName));
                            values.push(path);
                            var copiedcontent = values.slice();
                            $("#CNotebookfile").val(copiedcontent);
                        }
                    }
                });
            });
            $("#CFiles").focusin(function () {
                $('#tree').removeClass('disabled');
                var values = []
                $("#tree").fancytree("getTree").visit(function (node) {
                    if (node.selected) {
                        if (node.folder != "true") {
                            var keypath = node.key;
                            var projName = $('#projName').val();
                            var path = keypath.substring(keypath.indexOf(projName));
                            values.push(path);
                            var copiedcontent = values.slice();
                            $("#CFiles").val(copiedcontent);
                        }
                    }
                });
            });
            $("#CImagefiles").focusin(function () {
                $('#tree').removeClass('disabled');
                var values = []
                $("#tree").fancytree("getTree").visit(function (node) {
                    if (node.selected) {
                        if (node.folder != "true") {
                            var keypath = node.key;
                            var projName = $('#projName').val();
                            var path = keypath.substring(keypath.indexOf(projName));
                            values.push(path);
                            var copiedcontent = values.slice();
                            $("#CImagefiles").val(copiedcontent);
                        }
                    }
                });
            });
//            $("#CImagefiles").focusin(function () {
//                $('#tree').removeClass('disabled');
//                var values = []
//                $("#tree").fancytree("getTree").visit(function (node) {
//                    if (node.selected) {
//                        if (node.folder != "true") {
//                            var keypath = node.key;
//                            var projName = $('#projName').val();
//                            var path = keypath.substring(keypath.indexOf(projName));
//                            values.push(path);
//                            var copiedcontent = values.slice();
//                            $("#CImagefiles").val(copiedcontent);
//                        }
//                    }
//                });
//            });











            $(".disabler").focusin(function () {
                $('#tree').fancytree('getTree').visit(function (node) {
                    node.setSelected(false);
                });
                $('#tree').addClass('disabled');
            });


            //add new fields
            function addNewFields(itemName) {
                if (itemName == 'Info') {
                    var div = $('#extraInfoFields');
                    div.append('<label id="InfoExtra" for="field7"><span><input type="text" class="form-control textstatic"  title="Add Label For New Info Field" placeholder="Add Label For New Info Field" id="infolabel" value=""</span><input type="text" class="form-control textstatic" title="Add Value For New Info Field" placeholder="Add Value For New Info Field" id="infovalue" value=""/></label>')
                }
                if (itemName == 'Charts') {
                    var div = $('#extraChartsFields');
                    div.append('<label id="ChartsExtra" for="field10"><span><input type="text" class="form-control textstatic chartlabel"  title="Add Label For New Chart Field" placeholder="Add Label For New Chart Field" id="chartlabel" value=""</span><input type="text" class="form-control textstatic chartval" title="Add Value For New Info Field" placeholder="Add Value For New Chart Field" id="chartvalue" value=""/></label>')
                }
                if (itemName == 'Tools') {
                    var div = $('#extraToolsFields');
                    div.append('<label id="ToolsExtra" for="field10"><span><input type="text" class="form-control textstatic toolslabel"  title="Add Label For New Tools Field" placeholder="Add Label For New Tools Field" id="toolslabel" value=""</span><input type="text" class="form-control textstatic toolsval" title="Add Value For New Tools Field" placeholder="Add Value For New Tools Field" id="toolsvalue" value=""/></label>')
                }
                if (itemName == 'Datasets') {
                    var div = $('#extraDatasetsFields');
                    div.append('<label id="DatasetsExtra" for="field10"><span><input type="text" class="form-control textstatic datasetslabel"  title="Add Label For New Datasets Field" placeholder="Add Label For New Datasets Field" id="datasetslabel" value=""</span><input type="text" class="form-control textstatic datasetsval" title="Add Value For New Datasets Field" placeholder="Add Value For New Datasets Field" id="datasetsvalue" value=""/></label>')
                }
                if (itemName == 'Scripts') {
                    var div = $('#extraScriptsFields');
                    div.append('<label id="ScriptsExtra" for="field10"><span><input type="text" class="form-control textstatic scriptslabel"  title="Add Label For New Scripts Field" placeholder="Add Label For New Scripts Field" id="scriptslabel" value=""</span><input type="text" class="form-control textstatic scriptsval" title="Add Value For New Scripts Field" placeholder="Add Value For New Scripts Field" id="scriptsvalue" value=""/></label>')
                }
                if (itemName == 'Reference') {
                    var div = $('#extraReferenceFields');
                    div.append('<label id="ReferenceExtra" for="field10"><span><input type="text" class="form-control textstatic referencelabel"  title="Add Label For New Reference Field" placeholder="Add Label For New Reference Field" id="referencelabel" value=""</span><input type="text" class="form-control textstatic referenceval" title="Add Value For New Reference Field" placeholder="Add Value For New Reference Field" id="referencevalue" value=""/></label>')
                }
            }


            function removeNewFields(itemName) {
                if (itemName == 'Info') {
                    $('#InfoExtra').remove();
                }
                if (itemName == 'Charts') {
                    $('#ChartsExtra').remove();
                }
                if (itemName == 'Tools') {
                    $('#ToolsExtra').remove();
                }
                if (itemName == 'Datasets') {
                    $('#DatasetsExtra').remove();
                }
                if (itemName == 'Scripts') {
                    $('#ScriptsExtra').remove();
                }
                if (itemName == 'Reference') {
                    $('#ReferenceExtra').remove();
                }
            }
            $('#del').click(function () {
                var table = $(this).closest('table');
                if (table.find('input:text').length > 1) {
                    table.find('input:text').last().closest('tr').remove();
                }
            });

            var infoSaveList = [];
            var fnamelist = [];
            var mnamelist = [];
            var lnamelist = [];

            function saveInfo(type, saveas) {
                var type = type;
                $(".piFirstName").each(function () {
                    var firstname = $(this).val();
                    if (firstname.toString() != "") {
                        fnamelist.push(firstname);
                    }
                });
                $(".piMiddleName").each(function () {
                    var mname = $(this).val();
                    if (mname.toString() != "") {
                        mnamelist.push(mname);
                    }
                });
                $(".piLastName").each(function () {
                    var lname = $(this).val();
                    if (lname.toString() != "") {
                        lnamelist.push(lname);
                    }
                });
                var Collections = $('#Collections').val();
                var Tags = $('#Tags').val();
                var InfoNotebookfile = $('#InfoNotebookfile').val();
                var globusid = $('#globusID').val();
                var lablist = [];
                var vallist = [];
                var InfoSaveas = "";
                if (type == 'POST') {
                    InfoSaveas = $('#InfoSaveas').val();
                } else {
                    InfoSaveas = InfoSaveas;
                }
                var infolist = [];
                infolist.push(type);
                if (InfoSaveas.toString() != "")
                    infolist.push(InfoSaveas);
                else {
                    InfoSaveas = "N/A";
                    infolist.push(InfoSaveas);
                }

                if (fnamelist.length > 0)
                    infolist.push(fnamelist);
                if (mnamelist.length > 0)
                    infolist.push(mnamelist);
                if (lnamelist.length > 0)
                    infolist.push(lnamelist);
                if (Collections.toString() != "")
                    infolist.push(Collections);
                if (Tags.toString() != "")
                    infolist.push(Tags);
                if (InfoNotebookfile.toString() != "")
                    infolist.push(InfoNotebookfile);
                if (globusid.toString() != "")
                    infolist.push(globusid);
                $(".infolabel").each(function () {
                    var label = $(this).val();
                    if (label.toString() != "") {
                        lablist.push(label);
                    }
                });
                if (lablist.length > 0) {
                    infolist.push(lablist);
                } else {
                    lablist.push("N/A");
                    infolist.push(lablist);
                }
                $(".infoval").each(function () {
                    var infoval = $(this).val();
                    if (infoval.toString() != "") {
                        vallist.push(infoval);
                    }
                });
                if (vallist.length > 0) {
                    infolist.push(vallist);
                } else {
                    vallist.push("N/A");
                    infolist.push(vallist);
                }
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/getInfo',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(infolist),
                    success: function (data) {
                        console.log(data);
                        if (type == "INIT" && data.infoList.length > 0) {
                            for (var i = 0; i < data.infoList.length; i++) {
                                var navlist = $('#infoList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', data.infoList[i]);
                                b.setAttribute('onclick', 'saveInfo("GET","' + data.infoList[i] + '");');
                                b.innerHTML = data.infoList[i];
                                navlist.append(b);
                                infoSaveList.push(data.infoList[i]);
                            }
                        }
                        if (type == "POST") {
                            if (infoSaveList.indexOf(InfoSaveas) < 0) {
                                var navlist = $('#infoList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', InfoSaveas);
                                b.setAttribute('onclick', 'saveCharts("GET","' + InfoSaveas.toString() + '");');
                                b.innerHTML = InfoSaveas.toString();
                                navlist.append(b);
                                infoSaveList.push(InfoSaveas);
                            } else {
                                saveInfo("GET", InfoSaveas.toString());
                            }
                            reset('Info');
                        }
                        if (type == "GET") {
                            $('#Collections').val(data.infoDetails.desc.collections);
                            $('#Tags').val(data.infoDetails.desc.tags);
                            $('#InfoNotebookfile').val(data.infoDetails.desc.notebookFile);
                            $('#InfoSaveas').val(data.infoDetails.desc.saveas);
                            $(".infolabel").each(function () {
                                $(this).val(data.infoDetails.desc.extras);
                            });
                            $(".infoval").each(function () {
                                $(this).val(data.infoDetails.desc.extras);
                            });
                            infolist.push(lablist);

                            if (data.infoDetails.desc.saveas != "") {
                                $('#DeleteInfo').show();
                            } else {
                                $('#DeleteInfo').hide();
                            }
                            $('#DeleteInfo').attr('onclick', 'deleteInfo("' + data.infoDetails.desc.saveas.toString() + '")');
                        }
                    }
                });
            }


            function deleteInfo(saveas) {
                var dellist = [];
                dellist.push(saveas);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/delInfo',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(dellist),
                    success: function (data) {
                        var index = infoSaveList.indexOf(saveas);
                        infoSaveList.splice(index, 1);
                        $('.infodeletable').remove();
                        for (var i = 0; i < infoSaveList.length; i++) {
                            var navlist = $('#infoList');
                            var b = document.createElement('button');
                            b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                            b.setAttribute('value', infoSaveList[i]);
                            b.setAttribute('onclick', 'saveInfo("GET","' + infoSaveList[i] + '");');
                            b.innerHTML = infoSaveList[i].toString();
                            navlist.append(b);
                        }
                        reset('Info');
                    }
                });
            }



            function reset(inp) {
                if (inp == 'Info') {
                    $(".piFirstName").each(function () {
                        $(this).val('');
                    });
                    $(".piMiddleName").each(function () {
                        $(this).val('');
                    });
                    $(".piLastName").each(function () {
                        $(this).val('');
                    });
                    $('#Collections').val('');
                    $('#Tags').val('');
                    $('#InfoNotebookfile').val('');
                    $('#InfoSaveas').val('');
                    $(".infolabel").each(function () {
                        $(this).val('');
                    });
                    $(".infoval").each(function () {
                        $(this).val('');
                    });
                    $('#DeleteInfo').hide();
                }
                if (inp == 'Charts') {
                    $("input[name='ChartsRadio']").prop('checked', false);
                    $('#Caption').val('');
                    $('#Number').val('');
                    $('#CFiles').val('');
                    $('#CImagefiles').val('');
                    $('#CNotebookfile').val('');
                    $('#CProperties').val('');
                    $('#CSaveas').val('');
                    $(".chartlabel").each(function () {
                        $(this).val('');
                    });
                    $(".chartval").each(function () {
                        $(this).val('');
                    });
                    $('#DeleteChart').hide();
                }
                if (inp == 'Tools') {
                    $('#PackageName').val('');
                    $('#ProgramName').val('');
                    $('#Version').val('');
                    $('#ToolsUrls').val('');
                    $('#FacilityName').val('');
                    $('#Measurement').val('');
                    $('#ToolsEUrls').val('');
                    $('#Toolssaveas').val('');
                    $(".toolslabel").each(function () {
                        $(this).val('');
                    });
                    $(".toolsval").each(function () {
                        $(this).val('');
                    });
                    $('#DeleteTools').hide();
                }
                if (inp == 'Datasets') {
                    $('#DatasetsFiles').val('');
                    $('#DatasetsDescription').val('');
                    $('#DatasetsUrls').val('');
                    $('#Datasetssaveas').val('');
                    $(".datasetslabel").each(function () {
                        $(this).val('');
                    });
                    $(".datasetsval").each(function () {
                        $(this).val('');
                    });
                    $('#DeleteDatasets').hide();
                }
                if (inp == 'Scripts') {
                    $('#ScriptsFiles').val('');
                    $('#ScriptsDescription').val('');
                    $('#ScriptsUrls').val('');
                    $('#Scriptssaveas').val('');
                    $(".scriptslabel").each(function () {
                        $(this).val('');
                    });
                    $(".scriptsval").each(function () {
                        $(this).val('');
                    });
                    $('#DeleteScripts').hide();
                }
                if (inp == 'Reference') {
                    $('#Kind').val('');
                    $('#Authors').val('');
                    $('#Title').val('');
                    $('#JournalFull').val('');
                    $('#JournalAbbr').val('');
                    $('#Volume').val('');
                    $('#Page').val('');
                    $('#Year').val('');
                    $('#DOI').val('');
                    $('#Abstract').val('');
                    $('#referenceUrls').val('');
                    $('#ReferenceSaveas').val('');
                    $(".referencelabel").each(function () {
                        $(this).val('');
                    });
                    $(".referenceval").each(function () {
                        $(this).val('');
                    });
                    $('#DeleteReference').hide();
                }

            }



















            var chartsSaveList = [];
            function saveCharts(type, saveas) {
                var type = type;
                var radioValue = $("input[name='ChartsRadio']:checked").val();
                var Caption = $('#Caption').val();
                var Number = $('#Number').val();
                var CFiles = $('#CFiles').val();
                var CImagefiles = $('#CImagefiles').val();
                var CNotebookFile = $('#CNotebookfile').val();
                var Cproperties = $('#CProperties').val();
                var Csaveas = "";
                var lablist = [];
                var vallist = [];
                if (type == 'POST') {
                    Csaveas = $('#CSaveas').val();
                } else {
                    Csaveas = saveas;
                }
                var clist = [];
                clist.push(type);
                if (Csaveas.toString() != "")
                    clist.push(Csaveas);
                else {
                    Csaveas = "N/A";
                    clist.push(Csaveas);
                }
                if (typeof radioValue != 'undefined' && radioValue.toString() != "")
                    clist.push(radioValue);
                if (Caption.toString() != "")
                    clist.push(Caption);
                if (Number.toString() != "")
                    clist.push(Number);
                if (CFiles.toString() != "")
                    clist.push(CFiles);
                if (CImagefiles.toString() != "")
                    clist.push(CImagefiles);
                if (CNotebookFile.toString() != "")
                    clist.push(CNotebookFile);
                if (Cproperties.toString() != "")
                    clist.push(Cproperties);
                $(".chartlabel").each(function () {
                    var label = $(this).val();
                    if (label.toString() != "") {
                        lablist.push(label);
                    }
                });
                if (lablist.length > 0) {
                    clist.push(lablist);
                } else {
                    lablist.push("N/A");
                    clist.push(lablist);
                }
                $(".chartval").each(function () {
                    var chartval = $(this).val();
                    if (chartval.toString() != "") {
                        vallist.push(chartval);
                    }
                });
                if (vallist.length > 0) {
                    clist.push(vallist);
                } else {
                    vallist.push("N/A");
                    clist.push(vallist);
                }
                console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>");
                console.log(clist);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/getCharts',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(clist),
                    success: function (data) {
                        console.log(data);
                        if (type == "INIT" && data.chartList.length > 0) {
                            for (var i = 0; i < data.chartList.length; i++) {
                                var navlist = $('#chartsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', data.chartList[i]);
                                b.setAttribute('onclick', 'saveCharts("GET","' + data.chartList[i] + '");');
                                b.innerHTML = data.chartList[i];
                                navlist.append(b);
                                chartsSaveList.push(data.chartList[i]);
                            }
                        }
                        if (type == "POST") {
                            if (chartsSaveList.indexOf(Csaveas) < 0) {
                                var navlist = $('#chartsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', Csaveas);
                                b.setAttribute('onclick', 'saveCharts("GET","' + Csaveas.toString() + '");');
                                b.innerHTML = Csaveas.toString();
                                navlist.append(b);
                                chartsSaveList.push(Csaveas);
                            } else {
                                saveCharts("GET", Csaveas.toString());
                            }
                            reset('Charts');
                        }
                        if (type == "GET") {
                            $('input[name=ChartsRadio][value="' + data.cdetails.desc.kind.toString() + '"]').prop('checked', true)
                            $('#Caption').val(data.cdetails.desc.caption);
                            $('#Number').val(data.cdetails.desc.number);
                            $('#CFiles').val(data.cdetails.desc.files);
                            $('#CImagefiles').val(data.cdetails.desc.imageFile);
                            $('#CNotebookfile').val(data.cdetails.desc.notebookFile);
                            $('#CProperties').val(data.cdetails.desc.properties);
                            $('#CSaveas').val(data.cdetails.desc.saveas);
                            $(".chartlabel").each(function () {
                                $(this).val(data.cdetails.desc.extras);
                            });
                            clist.push(lablist);
                            $(".chartval").each(function () {
                                $(this).val(data.cdetails.desc.extras);
                            });
                            if (data.cdetails.desc.saveas != "") {
                                $('#DeleteChart').show();
                            } else {
                                $('#DeleteChart').hide();
                            }
                            $('#DeleteChart').attr('onclick', 'deleteCharts("' + data.cdetails.desc.saveas.toString() + '")');
                        }
                    }
                });
            }


            function deleteCharts(saveas) {
                var dellist = [];
                dellist.push(saveas);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/delCharts',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(dellist),
                    success: function (data) {
                        var index = chartsSaveList.indexOf(saveas);
                        chartsSaveList.splice(index, 1);
                        $('.deletable').remove();
                        for (var i = 0; i < chartsSaveList.length; i++) {
                            var navlist = $('#chartsList');
                            var b = document.createElement('button');
                            b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                            b.setAttribute('value', chartsSaveList[i]);
                            b.setAttribute('onclick', 'saveCharts("GET","' + chartsSaveList[i] + '");');
                            b.innerHTML = chartsSaveList[i].toString();
                            navlist.append(b);
                        }
                        reset('Charts');
                    }
                });
            }





            var toolsSaveList = [];
            function saveTools(type, saveas) {
                var type = type;
                var Kind = $("input[name='ToolsRadio']:checked").val();
                var PackageName = "";
                var ProgramName = "";
                var Version = "";
                var ToolsUrls = "";
                var FacilityName = "";
                var Measurement = "";
                var ToolsEUrls = "";
                var Toolssaveas = "";
                var lablist = [];
                var vallist = [];
                if (type == 'POST') {
                    Toolssaveas = $('#Toolssaveas').val();
                } else {
                    Toolssaveas = saveas;
                }
                var toolslist = [];
                toolslist.push(type);
                if (Toolssaveas.toString() != "")
                    toolslist.push(Toolssaveas);
                else {
                    Toolssaveas = "N/A";
                    toolslist.push(Toolssaveas);
                }
                if (typeof Kind != 'undefined' && Kind.toString() != "")
                    toolslist.push(Kind);
                if (Kind === 'Software') {
                    PackageName = $('#PackageName').val();
                    ProgramName = $('#ProgramName').val();
                    Version = $('#Version').val();
                    ToolsUrls = $('#ToolsUrls').val();
                    if (PackageName.toString() != "")
                        toolslist.push(PackageName);
                    if (ProgramName.toString() != "")
                        toolslist.push(ProgramName);
                    if (Version.toString() != "")
                        toolslist.push(Version);
                    if (ToolsUrls.toString() != "")
                        toolslist.push(ToolsUrls);
                    $(".toolslabel").each(function () {
                        var label = $(this).val();
                        if (label.toString() != "") {
                            lablist.push(label);
                        }
                    });
                    if (lablist.length > 0) {
                        toolslist.push(lablist);
                    } else {
                        lablist.push("N/A");
                        toolslist.push(lablist);
                    }
                    $(".toolsval").each(function () {
                        var toolsval = $(this).val();
                        if (toolsval.toString() != "") {
                            vallist.push(toolsval);
                        }
                    });
                    if (vallist.length > 0) {
                        toolslist.push(vallist);
                    } else {
                        vallist.push("N/A");
                        toolslist.push(vallist);
                    }
                }
                if (Kind === 'Experiment') {
                    FacilityName = $('#FacilityName').val();
                    Measurement = $('#Measurement').val();
                    ToolsEUrls = $('#ToolsEUrls').val();
                    if (FacilityName.toString() != "")
                        toolslist.push(FacilityName);
                    if (Measurement.toString() != "")
                        toolslist.push(Measurement);
                    if (ToolsEUrls.toString() != "")
                        toolslist.push(ToolsEUrls);
                    $(".toolslabel").each(function () {
                        var label = $(this).val();
                        if (label.toString() != "") {
                            lablist.push(label);
                        }
                    });
                    if (lablist.length > 0) {
                        toolslist.push(lablist);
                    } else {
                        lablist.push("N/A");
                        toolslist.push(lablist);
                    }
                    $(".toolsval").each(function () {
                        var toolsval = $(this).val();
                        if (toolsval.toString() != "") {
                            vallist.push(toolsval);
                        }
                    });
                    if (vallist.length > 0) {
                        toolslist.push(vallist);
                    } else {
                        vallist.push("N/A");
                        toolslist.push(vallist);
                    }
                }
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/getTools',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(toolslist),
                    success: function (data) {
                        console.log(data);
                        if (type == "INIT" && data.toolsList.length > 0) {
                            for (var i = 0; i < data.toolsList.length; i++) {
                                var navlist = $('#toolsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', data.toolsList[i]);
                                b.setAttribute('onclick', 'saveTools("GET","' + data.toolsList[i] + '");');
                                b.innerHTML = data.toolsList[i];
                                navlist.append(b);
                                toolsSaveList.push(data.toolsList[i]);
                            }
                        }
                        if (type == "POST") {
                            if (toolsSaveList.indexOf(Toolssaveas) < 0) {
                                var navlist = $('#toolsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', Toolssaveas);
                                b.setAttribute('onclick', 'saveTools("GET","' + Toolssaveas.toString() + '");');
                                b.innerHTML = Toolssaveas.toString();
                                navlist.append(b);
                                toolsSaveList.push(Toolssaveas);
                            } else {
                                saveTools("GET", Toolssaveas.toString());
                            }
                            reset('Tools');
                        }
                        if (type == "GET") {
                            $('input[name=ToolsRadio][value="' + data.toolsdetails.desc.kind.toString() + '"]').prop('checked', true)
                            if (data.toolsdetails.desc.kind.toString() === "Software") {
                                $('#PackageName').val(data.toolsdetails.desc.packageName);
                                $('#ProgramName').val(data.toolsdetails.desc.programName);
                                $('#Version').val(data.toolsdetails.desc.version);
                                $('#ToolsUrls').val(data.toolsdetails.desc.URLs);
                            }
                            if (data.toolsdetails.desc.kind.toString() === "Experiment") {
                                $('#FacilityName').val(data.toolsdetails.desc.facilityName);
                                $('#Measurement').val(data.toolsdetails.desc.measurement);
                                $('#ToolsEUrls').val(data.toolsdetails.desc.ExpURLs);
                            }
                            $('#Toolssaveas').val(data.toolsdetails.desc.saveas);
                            $(".toolslabel").each(function () {
                                $(this).val(data.toolsdetails.desc.extras);
                            });
                            toolslist.push(lablist);
                            $(".toolsval").each(function () {
                                $(this).val(data.toolsdetails.desc.extras);
                            });
                            if (data.toolsdetails.desc.saveas != "") {
                                $('#DeleteTools').show();
                            } else {
                                $('#DeleteTools').hide();
                            }
                            $('#DeleteTools').attr('onclick', 'deleteTools("' + data.toolsdetails.desc.saveas.toString() + '")');
                        }
                    }
                });
            }


            function deleteTools(saveas) {
                var dellist = [];
                dellist.push(saveas);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/delTools',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(dellist),
                    success: function (data) {
                        var index = toolsSaveList.indexOf(saveas);
                        toolsSaveList.splice(index, 1);
                        $('.deletable').remove();
                        for (var i = 0; i < toolsSaveList.length; i++) {
                            var navlist = $('#toolsList');
                            var b = document.createElement('button');
                            b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                            b.setAttribute('value', toolsSaveList[i]);
                            b.setAttribute('onclick', 'saveTools("GET","' + toolsSaveList[i] + '");');
                            b.innerHTML = toolsSaveList[i].toString();
                            navlist.append(b);
                        }
                        reset('Tools');
                    }
                });
            }


            var datasetsSaveList = [];
            function saveDatasets(type, saveas) {
                var type = type;
                var DatasetsFiles = "";
                var DatasetsDescription = "";
                var DatasetsUrls = "";
                var Datasetssaveas = "";
                var lablist = [];
                var vallist = [];
                if (type == 'POST') {
                    Datasetssaveas = $('#Datasetssaveas').val();
                } else {
                    Datasetssaveas = saveas;
                }
                var datasetslist = [];
                datasetslist.push(type);
                if (Datasetssaveas.toString() != "")
                    datasetslist.push(Datasetssaveas);
                else {
                    Datasetssaveas = "N/A";
                    datasetslist.push(Datasetssaveas);
                }

                DatasetsFiles = $('#DatasetsFiles').val();
                DatasetsDescription = $('#DatasetsDescription').val();
                DatasetsUrls = $('#DatasetsUrls').val();
                if (DatasetsFiles.toString() != "")
                    datasetslist.push(DatasetsFiles);
                if (DatasetsDescription.toString() != "")
                    datasetslist.push(DatasetsDescription);
                if (DatasetsUrls.toString() != "")
                    datasetslist.push(DatasetsUrls);
                $(".datasetslistlabel").each(function () {
                    var label = $(this).val();
                    if (label.toString() != "") {
                        lablist.push(label);
                    }
                });
                if (lablist.length > 0) {
                    datasetslist.push(lablist);
                } else {
                    lablist.push("N/A");
                    datasetslist.push(lablist);
                }
                $(".datasetsval").each(function () {
                    var datasetsval = $(this).val();
                    if (datasetsval.toString() != "") {
                        vallist.push(datasetsval);
                    }
                });
                if (vallist.length > 0) {
                    datasetslist.push(vallist);
                } else {
                    vallist.push("N/A");
                    datasetslist.push(vallist);
                }


                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/getDatasets',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(datasetslist),
                    success: function (data) {
                        console.log(data);
                        if (type == "INIT" && data.datasetslist.length > 0) {
                            for (var i = 0; i < data.datasetslist.length; i++) {
                                var navlist = $('#datasetsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', data.datasetslist[i]);
                                b.setAttribute('onclick', 'saveDatasets("GET","' + data.datasetslist[i] + '");');
                                b.innerHTML = data.datasetslist[i];
                                navlist.append(b);
                                datasetsSaveList.push(data.datasetslist[i]);
                            }
                        }
                        if (type == "POST") {
                            if (datasetsSaveList.indexOf(Datasetssaveas) < 0) {
                                var navlist = $('#datasetsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', Datasetssaveas);
                                b.setAttribute('onclick', 'saveDatasets("GET","' + Datasetssaveas.toString() + '");');
                                b.innerHTML = Datasetssaveas.toString();
                                navlist.append(b);
                                datasetsSaveList.push(Datasetssaveas);
                            } else {
                                saveDatasets("GET", Datasetssaveas.toString());
                            }
                            reset('Datasets');
                        }
                        if (type == "GET") {
                            $('#DatasetsFiles').val(data.datasetsdetails.desc.files);
                            $('#DatasetsDescription').val(data.datasetsdetails.desc.readme);
                            $('#DatasetsUrls').val(data.datasetsdetails.desc.URLs);
                            $('#Datasetssaveas').val(data.datasetsdetails.desc.saveas);
                            $(".datasetslabel").each(function () {
                                $(this).val(data.datasetsdetails.desc.extras);
                            });
                            datasetslist.push(lablist);
                            $(".datasetsval").each(function () {
                                $(this).val(data.datasetsdetails.desc.extras);
                            });
                            if (data.datasetsdetails.desc.saveas != "") {
                                $('#DeleteDatasets').show();
                            } else {
                                $('#DeleteDatasets').hide();
                            }
                            $('#DeleteDatasets').attr('onclick', 'deleteDatasets("' + data.datasetsdetails.desc.saveas.toString() + '")');
                        }
                    }
                });
            }


            function deleteDatasets(saveas) {
                var dellist = [];
                dellist.push(saveas);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/delDatasets',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(dellist),
                    success: function (data) {
                        var index = datasetsSaveList.indexOf(saveas);
                        datasetsSaveList.splice(index, 1);
                        $('.deletable').remove();
                        for (var i = 0; i < datasetsSaveList.length; i++) {
                            var navlist = $('#datasetsList');
                            var b = document.createElement('button');
                            b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                            b.setAttribute('value', datasetsSaveList[i]);
                            b.setAttribute('onclick', 'saveDatasets("GET","' + datasetsSaveList[i] + '");');
                            b.innerHTML = datasetsSaveList[i].toString();
                            navlist.append(b);
                        }
                        reset('Datasets');
                    }
                });
            }

            var scriptsSaveList = [];
            function saveScripts(type, saveas) {
                var type = type;
                var ScriptsFiles = "";
                var ScriptsDescription = "";
                var ScriptsUrls = "";
                var Scriptssaveas = "";
                var lablist = [];
                var vallist = [];
                if (type == 'POST') {
                    Scriptssaveas = $('#Scriptssaveas').val();
                } else {
                    Scriptssaveas = saveas;
                }
                var scriptslist = [];
                scriptslist.push(type);
                if (Scriptssaveas.toString() != "")
                    scriptslist.push(Scriptssaveas);
                else {
                    Scriptssaveas = "N/A";
                    scriptslist.push(Scriptssaveas);
                }

                ScriptsFiles = $('#ScriptsFiles').val();
                ScriptsDescription = $('#ScriptsDescription').val();
                ScriptsUrls = $('#ScriptsUrls').val();
                if (ScriptsFiles.toString() != "")
                    scriptslist.push(ScriptsFiles);
                if (ScriptsDescription.toString() != "")
                    scriptslist.push(ScriptsDescription);
                if (ScriptsUrls.toString() != "")
                    scriptslist.push(ScriptsUrls);
                $(".scriptslistlabel").each(function () {
                    var label = $(this).val();
                    if (label.toString() != "") {
                        lablist.push(label);
                    }
                });
                if (lablist.length > 0) {
                    scriptslist.push(lablist);
                } else {
                    lablist.push("N/A");
                    scriptslist.push(lablist);
                }
                $(".scriptsval").each(function () {
                    var scriptsval = $(this).val();
                    if (scriptsval.toString() != "") {
                        vallist.push(scriptsval);
                    }
                });
                if (vallist.length > 0) {
                    scriptslist.push(vallist);
                } else {
                    vallist.push("N/A");
                    scriptslist.push(vallist);
                }


                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/getScripts',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(scriptslist),
                    success: function (data) {
                        console.log(data);
                        if (type == "INIT" && data.scriptslist.length > 0) {
                            for (var i = 0; i < data.scriptslist.length; i++) {
                                var navlist = $('#scriptsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', data.scriptslist[i]);
                                b.setAttribute('onclick', 'saveScripts("GET","' + data.scriptslist[i] + '");');
                                b.innerHTML = data.scriptslist[i];
                                navlist.append(b);
                                scriptsSaveList.push(data.scriptslist[i]);
                            }
                        }
                        if (type == "POST") {
                            if (scriptsSaveList.indexOf(Scriptssaveas) < 0) {
                                var navlist = $('#scriptsList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', Scriptssaveas);
                                b.setAttribute('onclick', 'saveScripts("GET","' + Scriptssaveas.toString() + '");');
                                b.innerHTML = Scriptssaveas.toString();
                                navlist.append(b);
                                scriptsSaveList.push(Scriptssaveas);
                            } else {
                                saveScripts("GET", Scriptssaveas.toString());
                            }
                            reset('Scripts');
                        }
                        if (type == "GET") {
                            $('#ScriptsFiles').val(data.scriptsdetails.desc.files);
                            $('#ScriptsDescription').val(data.scriptsdetails.desc.readme);
                            $('#ScriptsUrls').val(data.scriptsdetails.desc.URLs);
                            $('#Scriptssaveas').val(data.scriptsdetails.desc.saveas);
                            $(".scriptslabel").each(function () {
                                $(this).val(data.scriptsdetails.desc.extras);
                            });
                            scriptslist.push(lablist);
                            $(".scriptsval").each(function () {
                                $(this).val(data.scriptsdetails.desc.extras);
                            });
                            if (data.scriptsdetails.desc.saveas != "") {
                                $('#DeleteScripts').show();
                            } else {
                                $('#DeleteScripts').hide();
                            }
                            $('#DeleteScripts').attr('onclick', 'deleteScripts("' + data.scriptsdetails.desc.saveas.toString() + '")');
                        }
                    }
                });
            }


            function deleteScripts(saveas) {
                var dellist = [];
                dellist.push(saveas);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/delScripts',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(dellist),
                    success: function (data) {
                        var index = scriptsSaveList.indexOf(saveas);
                        scriptsSaveList.splice(index, 1);
                        $('.deletable').remove();
                        for (var i = 0; i < scriptsSaveList.length; i++) {
                            var navlist = $('#scriptsList');
                            var b = document.createElement('button');
                            b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                            b.setAttribute('value', scriptsSaveList[i]);
                            b.setAttribute('onclick', 'saveScripts("GET","' + scriptsSaveList[i] + '");');
                            b.innerHTML = scriptsSaveList[i].toString();
                            navlist.append(b);
                        }
                        reset('Scripts');
                    }
                });
            }




            var referenceSaveList = [];
            function saveReference(type, saveas) {
                var type = type;
                var Kind = $('#Kind').val();
                var Authors = $('#Authors').val();
                var Title = $('#Title').val();
                var JournalFull = $('#JournalFull').val();
                var JournalAbbr = $('#JournalAbbr').val();
                var Volume = $('#Volume').val();
                var Page = $('#Page').val();
                var Year = $('#Year').val();
                var DOI = $('#DOI').val();
                var Abstract = $('#Abstract').val();
                var referenceUrls = $('#referenceUrls').val();
                var Referencesaveas = "";
                var lablist = [];
                var vallist = [];
                if (type == 'POST') {
                    referenceSaveas = $('#referenceSaveas').val();
                } else {
                    referenceSaveas = referenceSaveas;
                }
                var referencelist = [];
                referencelist.push(type);
                if (referenceSaveas.toString() != "")
                    referencelist.push(referenceSaveas);
                else {
                    referenceSaveas = "N/A";
                    referencelist.push(referenceSaveas);
                }
                if (Kind.toString() !== "")
                    referencelist.push(Kind);
                if (Authors.toString() !== "")
                    referencelist.push(Authors);
                if (Title.toString() !== "")
                    referencelist.push(Title);
                if (JournalFull.toString() !== "")
                    referencelist.push(JournalFull);
                if (JournalAbbr.toString() !== "")
                    referencelist.push(JournalAbbr);
                if (Volume.toString() !== "")
                    referencelist.push(Volume);
                if (Page.toString() !== "")
                    referencelist.push(Page);
                if (Year.toString() !== "")
                    referencelist.push(Year);
                if (DOI.toString() !== "")
                    referencelist.push(DOI);
                else {
                    referencelist.push("N/A");
                }
                if (Abstract.toString() !== "")
                    referencelist.push(Abstract);
                else {
                    referencelist.push("N/A");
                }
                if (referenceUrls.toString() !== "")
                    referencelist.push(referenceUrls);
                else {
                    referencelist.push("N/A");
                }
                $(".referencelabel").each(function () {
                    var label = $(this).val();
                    if (label.toString() != "") {
                        lablist.push(label);
                    }
                });
                if (lablist.length > 0) {
                    referencelist.push(lablist);
                } else {
                    lablist.push("N/A");
                    referencelist.push(lablist);
                }
                $(".referenceval").each(function () {
                    var referenceval = $(this).val();
                    if (referenceval.toString() != "") {
                        vallist.push(referenceval);
                    }
                });
                if (vallist.length > 0) {
                    referencelist.push(vallist);
                } else {
                    vallist.push("N/A");
                    referencelist.push(vallist);
                }
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/getReference',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(referencelist),
                    success: function (data) {
                        console.log(data);
                        if (type == "INIT" && data.referenceList.length > 0) {
                            for (var i = 0; i < data.referenceList.length; i++) {
                                var navlist = $('#referenceList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', data.referenceList[i]);
                                b.setAttribute('onclick', 'saveReference("GET","' + data.referenceList[i] + '");');
                                b.innerHTML = data.referenceList[i];
                                navlist.append(b);
                                referenceSaveList.push(data.referenceList[i]);
                            }
                        }
                        if (type == "POST") {
                            if (referenceSaveList.indexOf(Referencesaveas) < 0) {
                                var navlist = $('#referenceList');
                                var b = document.createElement('button');
                                b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                                b.setAttribute('value', Referencesaveas);
                                b.setAttribute('onclick', 'saveReference("GET","' + Referencesaveas.toString() + '");');
                                b.innerHTML = Referencesaveas.toString();
                                navlist.append(b);
                                referenceSaveList.push(Referencesaveas);
                            } else {
                                saveReference("GET", Referencesaveas.toString());
                            }
                            reset('Reference');
                        }
                        if (type == "GET") {
                            $('#Kind').val(data.referencedetails.desc.kind);
                            $('#Authors').val(data.referencedetails.desc.authors);
                            $('#Title').val(data.referencedetails.desc.title);
                            $('#JournalFull').val(data.referencedetails.desc.journal.fullName);
                            $('#JournalAbbr').val(data.referencedetails.desc.journal.abbrevName);
                            $('#Volume').val(data.referencedetails.desc.volume);
                            $('#Page').val(data.referencedetails.desc.page);
                            $('#Year').val(data.referencedetails.desc.year);
                            $('#DOI').val(data.referencedetails.desc.DOI);
                            $('#Abstract').val(data.referencedetails.desc.publishedAbstract);
                            $('#referenceUrls').val(data.referencedetails.desc.URLs);
                            $('#ReferenceSaveas').val(data.referencedetails.desc.saveas);
                            $(".referencelabel").each(function () {
                                $(this).val(data.referencedetails.desc.extras);
                            });
                            referencelist.push(lablist);
                            $(".referenceval").each(function () {
                                $(this).val(data.referencedetails.desc.extras);
                            });
                            if (data.referencedetails.desc.saveas != "") {
                                $('#DeleteReference').show();
                            } else {
                                $('#DeleteReference').hide();
                            }
                            $('#DeleteReference').attr('onclick', 'deleteReference("' + data.referencedetails.desc.saveas.toString() + '")');
                        }
                    }
                });
            }


            function deleteReference(saveas) {
                var dellist = [];
                dellist.push(saveas);
                $.ajax({
                    method: 'POST',
                    url: 'http://127.0.0.1:5000/delReference',
                    dataType: "json",
                    contentType: "application/json ; charset=utf-8",
                    data: JSON.stringify(dellist),
                    success: function (data) {
                        var index = referenceSaveList.indexOf(saveas);
                        referenceSaveList.splice(index, 1);
                        $('.deletable').remove();
                        for (var i = 0; i < referenceSaveList.length; i++) {
                            var navlist = $('#chartsList');
                            var b = document.createElement('button');
                            b.setAttribute('class', 'btn btn-lg btn-primary deletable');
                            b.setAttribute('value', referenceSaveList[i]);
                            b.setAttribute('onclick', 'saveReference("GET","' + referenceSaveList[i] + '");');
                            b.innerHTML = referenceSaveList[i].toString();
                            navlist.append(b);
                        }
                        reset('Reference');
                    }
                });
            }

            $(function () {
                $('.formelements').css("display", "none");
                $('.kindelements').css("display", "none");
                $(document).tooltip();
                var Kind = $("input[name='ToolsRadio']:checked").val();
                if (Kind === 'Software') {
                    $('#Software').css("display", "block");
                }
                if (Kind === 'Experiment') {
                    $('#Experiment').css("display", "block");
                }
                $('#treelist').change(function () {
                    $('.formelements').css("display", "none");
                    if ($('#treelist').val() === 'Info') {
                        saveInfo('INIT', '');
                        $('#Info').css("display", "block");
                        reset('Info');
                    }
                    if ($('#treelist').val() === 'Charts') {
                        saveCharts('INIT', '');
                        $('#Charts').css("display", "block");
                        reset('Charts');
                    }
                    if ($('#treelist').val() === 'Tools') {
                        saveTools('INIT', '');
                        $('#Tools').css("display", "block");
                        reset('Tools');
                    }
                    if ($('#treelist').val() === 'Datasets') {
                        saveDatasets('INIT', '');
                        $('#Datasets').css("display", "block");
                        reset('Datasets');
                    }
                    if ($('#treelist').val() === 'Scripts') {
                        saveScripts('INIT', '');
                        $('#Scripts').css("display", "block");
                        reset('Scripts');
                    }
                    if ($('#treelist').val() === 'Reference') {
                        saveReference('INIT', '');
                        $('#Reference').css("display", "block");
                        reset('Reference');
                    }
                });
                $('.mandate').focusin(function () {

                    var empty = false;
                    $('.mandate').each(function () {
                        if ($(this).val() == '') {
                            empty = true;
                        }
                    });
                    if (empty) {
                        $('#Save').attr('disabled', 'disabled'); // updated according to http://stackoverflow.com/questions/7637790/how-to-remove-disabled-attribute-with-jquery-ie
                    } else {
                        $('#Save').removeAttr('disabled'); // updated according to http://stackoverflow.com/questions/7637790/how-to-remove-disabled-attribute-with-jquery-ie
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="tree" style="width: 40%; float: left;">
        </div>
        <div style="width: 10%">
        </div>
        <div id = "menulist" style="width: 50%; float: right; margin-right: 20px; margin-left: 10px;">
            <form> 
                <label>
                    <input type="button" class="btn btn-lg btn-primary btn-block" style="width: 100%; display: block;" value="Back" onclick="$('#content').load('./pages/server.html');"/>
                </label>
            </form>
            <div>
                <form>
                    <label for="nodeParent">Node Parent:</label>
                    <select id="treelist" style="width: 100%; display: block;">
                        <option value="Default"></option>
                        <option value="Info">Info</option>
                        <option value="Charts">Charts</option>
                        <option value="Tools">Tools</option>
                        <option value="DataSets">Datasets</option>
                        <option value="Scripts">Scripts</option>
                        <option value="Reference">Reference</option>
                    </select>
                </form>
            </div>
            <div style="margin-top: 20px;">
                <div id="Info" class="formelements">
                    <div class="form-style-2-heading">Add New Info</div>
                    <form>
                        <div class="form-group">
                            <label for="field1"><span>First Name of PI<span class="required">*</span></span><input type="text" class="form-control disabler textstatic"  id="pifname" value="" placeholder="Enter First Name of PI" required/></label>
                            <br/>
                            <label for="field2"><span>Middle Name  of PI</span><input type="text" class="form-control disabler textstatic"  id="pimname" value="" placeholder="Enter Middle Name of PI"/></label>
                            <br/>
                            <label for="field3"><span>Last Name  of PI<span class="required">*</span></span><input type="text" class="form-control disabler textstatic"  id="pilname" value="" placeholder="Enter Last Name of PI"/></label>
                            <br/>
                            <label for="field4"><span>Collections<span class="required">*</span></span><input type="text" class="form-control disabler textstatic"  id="collection" value="" placeholder="Enter Collection to which Project belongs"/></label>
                            <br/>
                            <label for="field5"><span>Tags<span class="required">*</span></span><input type="text" class="form-control disabler textstatic"  id="tags" value="" placeholder="Enter Tags for the project"/></label>
                            <br/>
                            <label for="field6"><span>Main Notebook File</span><input type="text" class="form-control textstatic"  id="infoNotebookfile" value="" title="Check elements from tree you want to add to this text box" placeholder="Enter Main Notebook File Name"/></label>
                            <br/>
                            <label for="field7"><span>Save As<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="InfoSaveas" value="" title="Save Info As (Unique for every Info)" placeholder="Save Info As" required/></label>
                            <br/>
                            <label for="field8"><span>Extra Fields</span></label>
                            <div id="extraInfoFields">

                            </div> 
                            <br/>
                            <label for="buttons">
                                <input type="button" class="btn btn-lg btn-primary" value="Save" onclick="saveInfo('POST');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Add New Fields" onclick="addNewFields('Info');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Delete New Fields" onclick="removeNewFields('Info');"/>
                            </label>
                        </div>
                    </form>
                </div>
                <div id="Charts" class="formelements">
                    <div class="form-style-2-heading">Add New Charts</div>
                    <label id="chartsList">
                    </label>
                    <form>
                        <div class="form-group">
                            <label for="field1"><span>Kind<span class="required">*</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
                                <input type="radio" name="ChartsRadio" value="Figure"> Figure <input type="radio" name="ChartsRadio" value="Table"> Table</label>
                            <br/>
                            <label for="field2"><span>Caption<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Caption" value="" placeholder="Enter Caption for Chart"/></label>
                            <br/>
                            <label for="field3"><span>Number<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Number" value="" placeholder="Enter Number for Chart" required/></label>
                            <br/>
                            <label for="field4"><span>Files<span class="required">*</span></span><input type="text" class="form-control textstatic mandate"  id="CFiles" value="" placeholder="Add Files Using Checkbox"/></label>
                            <br/>
                            <label for="field5"><span>Image Files<span class="required">*</span></span><input type="text" class="form-control textstatic mandate"  id="CImagefiles" value="" placeholder="Add Image File Using Checkbox" required/></label>
                            <br/>
                            <label for="field6"><span>Notebook File<span class="required">*</span></span><input type="text" class="form-control textstatic mandate"  id="CNotebookfile" value="" placeholder="Add Notebook File Using Checkbox"/></label>
                            <br/>
                            <label for="field7"><span>Properties<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="CProperties" value="" placeholder="Add Properties of Chart" required/></label>
                            <br/>
                            <label for="field8"><span>Save As<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="CSaveas" value="" title="Save Chart Info As (Unique for every Chart)" placeholder="Save Chart Info As" required/></label>
                            <br/>
                            <label for="field9"><span>Extra Fields</span></label>
                            <div id="extraChartsFields">

                            </div> 
                            <label for="buttons">
                                <input type="button" class="btn btn-lg btn-primary" id="Save" value="Save" onclick="saveCharts('POST', 'None');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Add New Fields" onclick="addNewFields('Charts');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Delete New Fields" onclick="removeNewFields('Charts');"/>
                                <input type="button" id="DeleteChart" class="btn btn-lg btn-primary" value="Delete Chart"/>
                            </label>
                        </div>
                    </form>
                </div>
                <div id="Tools" class="formelements">
                    <div class="form-style-2-heading">Add New Tools</div>
                    <label id="toolsList">
                    </label>
                    <form>
                        <div class="form-group">
                            <label for="field1"><span>Kind<span class="required">*</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
                                <input type="radio" name="ToolsRadio" value="Software"> Software <input type="radio" name="ToolsRadio" value="Experiment"> Experiment</label>
                            <br/>
                            <div id="Software">
                                <label for="field2"><span>Package Name<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="PackageName" value="" placeholder="Enter Package Name for Software Tools"/></label>
                                <br/>
                                <label for="field3"><span>Program Name<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="ProgramName" value="" placeholder="Enter Program Name for Software Tools" required/></label>
                                <br/>
                                <label for="field4"><span>Version<span class="required">*</span></span><input type="text" class="form-control textstatic mandate"  id="Version" value="" placeholder="Enter Version for Software Tools"/></label>
                                <br/>
                                <label for="field5"><span>URLs</span><input type="text" class="form-control textstatic"  id="ToolsUrls" value="" placeholder="Enter Urls for Software Tools" required/></label>
                            <br/>
                            </div>
                            <br/>
                            <div id="Experiment">
                                <label for="field6"><span>Facility Name<span class="required">*</span></span><input type="text" class="form-control textstatic mandate"  id="FacilityName" value="" placeholder="Enter Facility Name for Experiment Tools"/></label>
                                <br/>
                                <label for="field7"><span>Measurement<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Measurement" value="" placeholder="Enter Measurement for Experiment Tools" required/></label>
                                <br/>
                                <label for="field8"><span>URLs</span><input type="text" class="form-control disabler textstatic mandate"  id="ToolsEUrls" value="" placeholder="Enter Urls for Experiment Tools" required/></label>
                                <br/>
                            </div>
                            <label for="field9"><span>Save As<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="ToolsSaveas" value="" title="Save Tools Save As (Unique for every Tools)" placeholder="Save Tools As" required/></label>
                            <label for="field10"><span>Extra Fields</span></label>
                            <div id="extraToolsFields">

                            </div> 
                            <label for="buttons">
                                <input type="button" class="btn btn-lg btn-primary" id="Save" value="Save" onclick="saveTools('POST', 'None');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Add New Fields" onclick="addNewFields('Tools');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Delete New Fields" onclick="removeNewFields('Tools');"/>
                                <input type="button" id="DeleteChart" class="btn btn-lg btn-primary" value="Delete Tools"/>
                            </label>
                        </div>
                    </form>
                </div>
                <div id="Datasets" class="formelements">
                    <div class="form-style-2-heading">Add New Datasets</div>
                    <label id="datasetsList">
                    </label>
                    <form>
                        <div class="form-group">
                            <label for="field1"><span>Files<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="DatasetsFiles" value="" placeholder="Enter Files for Datasets"/></label>
                            <br/>
                            <label for="field2"><span>Description<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="DatasetsDescription" value="" placeholder="Enter Description For Datasets" required/></label>
                            <br/>
                            <label for="field3"><span>URLs</span><input type="text" class="form-control textstatic"  id="DatasetsUrls" value="" placeholder="Enter Urls for Datasets"/></label>
                            <br/>
                            <label for="field4"><span>Extra Fields</span></label>
                            <div id="extraDatasetsFields">

                            </div> 
                            <label for="buttons">
                                <input type="button" class="btn btn-lg btn-primary" id="Save" value="Save" onclick="saveDatasets('POST', 'None');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Add New Fields" onclick="addNewFields('Datasets');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Delete New Fields" onclick="removeNewFields('Datasets');"/>
                                <input type="button" id="DeleteDatasets" class="btn btn-lg btn-primary" value="Delete Datasets"/>
                            </label>
                        </div>
                    </form>
                </div>
                 <div id="Scripts" class="formelements">
                    <div class="form-style-2-heading">Add New Scripts</div>
                    <label id="scriptsList">
                    </label>
                    <form>
                        <div class="form-group">
                            <label for="field1"><span>Files<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="ScriptsFiles" value="" placeholder="Enter Files for Scripts"/></label>
                            <br/>
                            <label for="field2"><span>Description<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="ScriptsDescription" value="" placeholder="Enter Description For Scripts" required/></label>
                            <br/>
                            <label for="field3"><span>URLs</span><input type="text" class="form-control textstatic"  id="ScriptsUrls" value="" placeholder="Enter Urls for Scripts"/></label>
                            <br/>
                            <label for="field4"><span>Extra Fields</span></label>
                            <div id="extraScriptsFields">

                            </div> 
                            <label for="buttons">
                                <input type="button" class="btn btn-lg btn-primary" id="Save" value="Save" onclick="saveScripts('POST', 'None');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Add New Fields" onclick="addNewFields('Scripts');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Delete New Fields" onclick="removeNewFields('Scripts');"/>
                                <input type="button" id="DeleteScripts" class="btn btn-lg btn-primary" value="Delete Scripts"/>
                            </label>
                        </div>
                    </form>
                </div>
                <div id="Reference" class="formelements">
                    <div class="form-style-2-heading">Add New Reference</div>
                    <label id="referenceList">
                    </label>
                    <form>
                        <div class="form-group">
                            <label for="field1"><span>Kind<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Kind" value="" placeholder="Enter Kind for Reference"/></label>
                            <br/>
                            <label for="field2"><span>Authors<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Authors" value="" placeholder="Enter Authors For Reference"/></label>
                            <br/>
                            <label for="field3"><span>Title<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Title" value="" placeholder="Enter Title for Reference"/></label>
                            <br/>
                            <label for="field4"><span>Journal Full<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="JournalFull" value="" placeholder="Enter Full Journal Name For Reference"/></label>
                            <br/>
                            <label for="field5"><span>Journal Abbr<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="JournalAbbr" value="" placeholder="Enter Journal Abbr For Reference"/></label>
                            <br/>
                            <label for="field6"><span>Volume<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Volume" value="" placeholder="Enter Volume of Journal For Reference"/></label>
                            <br/>
                            <label for="field7"><span>Page<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Page" value="" placeholder="Enter Page For Reference"/></label>
                            <br/>
                            <label for="field8"><span>Year<span class="required">*</span></span><input type="text" class="form-control disabler textstatic mandate"  id="Year" value="" placeholder="Enter Year For Reference"/></label>
                            <br/>
                            <label for="field9"><span>DOI</span><input type="text" class="form-control disabler textstatic"  id="DOI" value="" placeholder="Enter DOI For Reference"/></label>
                            <br/>
                            <label for="field10"><span>Abstract</span><input type="text" class="form-control disabler textstatic"  id="Abstract" value="" placeholder="Enter Abstract For Reference"/></label>
                            <br/>
                            <label for="field11"><span>URLs</span><input type="text" class="form-control textstatic"  id="referenceUrls" value="" placeholder="Enter Reference Urls"/></label>
                            <br/>
                            <label for="field12"><span>Extra Fields</span></label>
                            <div id="extraScriptsFields">

                            </div> 
                            <label for="buttons">
                                <input type="button" class="btn btn-lg btn-primary" id="Save" value="Save" onclick="saveScripts('POST', 'None');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Add New Fields" onclick="addNewFields('Scripts');"/>
                                <input type="button" class="btn btn-lg btn-primary" value="Delete New Fields" onclick="removeNewFields('Scripts');"/>
                                <input type="button" id="DeleteScripts" class="btn btn-lg btn-primary" value="Delete Scripts"/>
                            </label>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>
